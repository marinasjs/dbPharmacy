-- MySQL Script generated by MySQL Workbench
-- Mon Jul 12 16:48:05 2021
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';


CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;


CREATE TABLE IF NOT EXISTS `mydb`.`Categoria` (
  `codcategoria` INT NOT NULL ,
  `categoria` VARCHAR(70) NULL,
  PRIMARY KEY (`codcategoria`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Cidade`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Cidade` (
  `codcidade` INT NOT NULL ,
  `cidade` VARCHAR(45) NULL,
  `uf` VARCHAR(45) NULL,
  PRIMARY KEY (`codcidade`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Fornecedor`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Fornecedor` (
  `codfornecedor` INT NOT NULL ,
  `fornecedor` VARCHAR(45) NULL,
  `endereco` VARCHAR(45) NULL,
  `num` INT NULL,
  `bairro` VARCHAR(45) NULL,
  `cep` VARCHAR(45) NULL,
  `contrato` VARCHAR(45) NULL,
  `cnpj` INT NULL,
  `insc` VARCHAR(45) NULL,
  `tel` BIGINT(10) NULL,
  `Cidade_codcidade` INT NOT NULL,
  PRIMARY KEY (`codfornecedor`, `Cidade_codcidade`),
  INDEX `fk_Fornecedor_Cidade1_idx` (`Cidade_codcidade` ASC) ,
  CONSTRAINT `fk_Fornecedor_Cidade1`
    FOREIGN KEY (`Cidade_codcidade`)
    REFERENCES `mydb`.`Cidade` (`codcidade`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Produto`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Produto` (
  `codproduto` INT NOT NULL ,
  `descricao` VARCHAR(45) NULL,
  `peso` DOUBLE NULL,
  `controlado` VARCHAR(45) NULL,
  `qtdemin` DOUBLE NULL,
  `Categoria_codcategoria` INT NOT NULL,
  `Fornecedor_codfornecedor` INT NOT NULL,
  PRIMARY KEY (`codproduto`, `Categoria_codcategoria`, `Fornecedor_codfornecedor`),
  INDEX `fk_Produto_Categoria_idx` (`Categoria_codcategoria` ASC) ,
  INDEX `fk_Produto_Fornecedor1_idx` (`Fornecedor_codfornecedor` ASC) ,
  CONSTRAINT `fk_Produto_Categoria`
    FOREIGN KEY (`Categoria_codcategoria`)
    REFERENCES `mydb`.`Categoria` (`codcategoria`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Produto_Fornecedor1`
    FOREIGN KEY (`Fornecedor_codfornecedor`)
    REFERENCES `mydb`.`Fornecedor` (`codfornecedor`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`trasnportadora`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Transportadora` (
  `codtransportadora` INT NOT NULL ,
  `transportadora` VARCHAR(45) NULL,
  `endereco` VARCHAR(45) NULL,
  `num` INT NULL,
  `bairro` VARCHAR(45) NULL,
  `cep` INT NULL,
  `cnpj` INT NULL,
  `insc` INT NULL,
  `tel` BIGINT(10) NULL,
  `Cidade_codcidade` INT NOT NULL,
  PRIMARY KEY (`codtransportadora`, `Cidade_codcidade`),
  INDEX `fk_Transportadora_Cidade1_idx` (`Cidade_codcidade` ASC) ,
  CONSTRAINT `fk_Transportadora_Cidade1`
    FOREIGN KEY (`Cidade_codcidade`)
    REFERENCES `mydb`.`Cidade` (`codcidade`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Entrada`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Entrada` (
  `codentrada` INT NOT NULL ,
  `dataped` DATE NULL,
  `dataentr` DATE NULL,
  `total` VARCHAR(45) NULL,
  `frete` DOUBLE NULL,
  `numnf` INT NULL,
  `imposto` VARCHAR(45) NULL,
  `Transportadora_codtransportadora` INT NOT NULL,
  `Transportadora_Cidade_codcidade` INT NOT NULL,
  PRIMARY KEY (`codentrada`, `Transportadora_codtransportadora`, `Transportadora_Cidade_codcidade`),
  INDEX `fk_Entrada_Transportadora1_idx` (`Transportadora_codtransportadora` ASC, `Transportadora_Cidade_codcidade` ASC) ,
  CONSTRAINT `fk_Entrada_Transportadora1`
    FOREIGN KEY (`Transportadora_codtransportadora` , `Transportadora_Cidade_codcidade`)
    REFERENCES `mydb`.`Transportadora` (`codtransportadora` , `Cidade_codcidade`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`ItemEntrada`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`ItemEntrada` (
  `codeitementrada` INT NOT NULL ,
  `lote` VARCHAR(45) NULL,
  `qtde` INT NULL,
  `valor` FLOAT NULL,
  `Produto_codproduto` INT NOT NULL,
  `Produto_Categoria_codcategoria` INT NOT NULL,
  `Entrada_codentrada` INT NOT NULL,
  `Entrada_Transportadora_codtransportadora` INT NOT NULL,
  `Entrada_Transportadora_Cidade_codcidade` INT NOT NULL,
  PRIMARY KEY (`codeitementrada`, `Produto_codproduto`, `Produto_Categoria_codcategoria`, `Entrada_codentrada`, `Entrada_Transportadora_codtransportadora`, `Entrada_Transportadora_Cidade_codcidade`),
  INDEX `fk_ItemEntrada_Produto1_idx` (`Produto_codproduto` ASC, `Produto_Categoria_codcategoria` ASC) ,
  INDEX `fk_ItemEntrada_Entrada1_idx` (`Entrada_codentrada` ASC, `Entrada_Transportadora_codtransportadora` ASC, `Entrada_Transportadora_Cidade_codcidade` ASC) ,
  CONSTRAINT `fk_ItemEntrada_Produto1`
    FOREIGN KEY (`Produto_codproduto` , `Produto_Categoria_codcategoria`)
    REFERENCES `mydb`.`Produto` (`codproduto` , `Categoria_codcategoria`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ItemEntrada_Entrada1`
    FOREIGN KEY (`Entrada_codentrada` , `Entrada_Transportadora_codtransportadora` , `Entrada_Transportadora_Cidade_codcidade`)
    REFERENCES `mydb`.`Entrada` (`codentrada` , `Transportadora_codtransportadora` , `Transportadora_Cidade_codcidade`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Loja`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Loja` (
  `codloja` INT NOT NULL ,
  `nome` VARCHAR(45) NULL,
  `endereco` VARCHAR(45) NULL,
  `num` INT NULL,
  `bairro` VARCHAR(45) NULL,
  `tel` BIGINT(10) NULL,
  `insc` VARCHAR(45) NULL,
  `cnpj` VARCHAR(45) NULL,
  `Cidade_codcidade` INT NOT NULL,
  PRIMARY KEY (`codloja`, `Cidade_codcidade`),
  INDEX `fk_Loja_Cidade1_idx` (`Cidade_codcidade` ASC) ,
  CONSTRAINT `fk_Loja_Cidade1`
    FOREIGN KEY (`Cidade_codcidade`)
    REFERENCES `mydb`.`Cidade` (`codcidade`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Saida`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Saida` (
  `codsaida` INT NOT NULL ,
  `total` VARCHAR(45) NULL,
  `frete` DOUBLE NULL,
  `imposto` VARCHAR(45) NULL,
  `Loja_codloja` INT NOT NULL,
  `Loja_Cidade_codcidade` INT NOT NULL,
  `Transportadora_codtransportadora` INT NOT NULL,
  `Transportadora_Cidade_codcidade` INT NOT NULL,
  PRIMARY KEY (`codsaida`, `Loja_codloja`, `Loja_Cidade_codcidade`, `Transportadora_codtransportadora`, `Transportadora_Cidade_codcidade`),
  INDEX `fk_Saida_Loja1_idx` (`Loja_codloja` ASC, `Loja_Cidade_codcidade` ASC) ,
  INDEX `fk_Saida_trasnportadora1_idx` (`Transportadora_codtransportadora` ASC, `Transportadora_Cidade_codcidade` ASC) ,
  CONSTRAINT `fk_Saida_Loja1`
    FOREIGN KEY (`Loja_codloja` , `Loja_Cidade_codcidade`)
    REFERENCES `mydb`.`Loja` (`codloja` , `Cidade_codcidade`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Saida_Transportadora1`
    FOREIGN KEY (`Transportadora_codtransportadora` , `Transportadora_Cidade_codcidade`)
    REFERENCES `mydb`.`Transportadora` (`codtransportadora` , `Cidade_codcidade`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`ItemSaida`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`ItemSaida` (
  `coditementrada` INT NOT NULL ,
  `lote` VARCHAR(45) NULL,
  `qtde` INT NULL,
  `valor` DOUBLE NULL,
  `ItemSaidacol` VARCHAR(45) NULL,
  `Produto_codproduto` INT NOT NULL,
  `Produto_Categoria_codcategoria` INT NOT NULL,
  `Produto_Fornecedor_codfornecedor` INT NOT NULL,
  `Saida_codsaida` INT NOT NULL,
  PRIMARY KEY (`coditementrada`, `Produto_codproduto`, `Produto_Categoria_codcategoria`, `Produto_Fornecedor_codfornecedor`, `Saida_codsaida`),
  INDEX `fk_ItemSaida_Produto1_idx` (`Produto_codproduto` ASC, `Produto_Categoria_codcategoria` ASC, `Produto_Fornecedor_codfornecedor` ASC) ,
  INDEX `fk_ItemSaida_Saida1_idx` (`Saida_codsaida` ASC) ,
  CONSTRAINT `fk_ItemSaida_Produto1`
    FOREIGN KEY (`Produto_codproduto` , `Produto_Categoria_codcategoria` , `Produto_Fornecedor_codfornecedor`)
    REFERENCES `mydb`.`Produto` (`codproduto` , `Categoria_codcategoria` , `Fornecedor_codfornecedor`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ItemSaida_Saida1`
    FOREIGN KEY (`Saida_codsaida`)
    REFERENCES `mydb`.`Saida` (`codsaida`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

insert into Categoria values (1,'remedios'),
	                         (2,'fraldas'),
                             (3,'perfumaria');
						     (4,'shampoo');
                        
insert into Cidade values (01, 'Curitiba', 'PR'),
						(02,'Blumenau', 'SC'),
                        (03, 'Gaspar', 'SC'),
						(04,'Campo Largo', 'PR');
                        
insert into Fornecedor values (11, 'DrogariaVC', 'Rua 123', 123, 'Sao Geronimo', '789541686', '123456000115',123400115, 'inscricao', 4133258954, 01),
						      (12,'DrogariasTD', 'Rua 323', 323, 'Sao Geron', '785241686', '128746000115',12870115, 'inscricao2', 4733258954, 02),
                              (13, 'Drogaria', 'Rua 423', 423, 'Sao nimo', '789558286', '121236000115',12100115, 'inscricao3', 4733254554, 03),
						      (14,'Drogar', 'Rua 523', 523, 'Sao Geoni', '789123486', '196356000115',1963115, 'inscricao4', 4133241254, 04);
                              
insert into Produto values (21, 'tira dor', 02, 'sim', 1, 1,11),
						   (22,'mantem seco', 500, 'não', 3, 2, 12),
						   (23, 'cheiroso', 25, 'não', 1, 3, 13),
						   (24,'deixa sedoso', 35, 'não', 2, 4, 14);
                           
insert into Transportadora values (31, 'transpotamos', 'Rua 123', 123, 'Sao Geronimo', 789541686, 12345115,123400115,  4133258954, 01),
						          (32,'dirigimos para vc', 'Rua 323', 323, 'Sao Geron', 785241686, 12874115,12870115,  4733258954, 02),
                                  (33, 'somos lentos', 'Rua 423', 423, 'Sao nimo', 789558286, 1212315,12100115, 4733254554, 03),
						          (34,'rápidos e desleixados', 'Rua 523', 523, 'Sao Geoni', 789123486, 1963515,1963115, 4133241254, 04);


insert into Entrada values (41, 20210808, 20211105, '580,00', 66, 99,'muitos',31,01),
						   (42, 20210907, 20211006, '280,80', 300, 66, 'lots',32,02),
						   (43, 20211006, 20210907, '300,00', 280, 33, 'tooi',33,03),
						   (44, 20211105, 20210808, '66,60', 580, 97, 'viel',34,04);
                           
insert into ItemEntrada values (51, 'l12', 02, 20 , 21, 1, 41, 31, 01),
						       (52,'l13', 500,30.52 , 22, 2, 42, 32, 02),
						       (53, 'l14', 25,15.8 , 23, 3, 43, 33, 03),
						       (54,'l15', 35,8.99 , 24, 4, 44, 34, 04);	
                               

  insert into Loja values (61, 'Loja A', 'Rua 123', 1823, 'Sao Geronimo', 7895686, '12345115','123400115', 01),
						  (62,'Loja B', 'Rua 1123', 1283, 'Sao Gernimo', 7954686, '12345115','123400115', 02),
						  (63, 'Loja C', 'Rua 2123', 1323, 'Sao Genimo', 78954686, '12345115','12340011', 03),
						  (64,'Loja D', 'Rua 3123', 1523, 'Sao Gemo', 7894686, '12345115','123400115', 04);	 
                          
insert into Saida values (71,'380' , 02 , '20'    , 61, 01, 31,  01),
						 (72,'1050', 500, '30.52' , 62, 02, 32,  02),
						 (73, '200', 25 , '15.8'  , 63, 03, 33,  03),
						 (74,'400' , 35 , '8.99'  , 64, 04, 34, 04);	
                         
insert into ItemSaida values (81, 'l12', 02, 20    , '21', 21 , 1, 11, 71),
							 (82,'l13', 500, 30.52 , '22', 22 , 2, 12, 72),
							 (83, 'l14', 25, 15.8 , '23' , 23 , 3, 13, 73),
							 (84,'l15', 35 , 8.99 , '24' , 24 , 4, 14, 74);	
                             

                          
		

